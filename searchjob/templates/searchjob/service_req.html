{% extends 'freelancer_layout.html' %}
{% load static %}

{% load crispy_forms_tags %}
{% block content %}
<div class="container col-12">
    <h1>Service Requests</h1>
</div>

<div class="container col-12">

    <div class="job-post-item bg-white p-4 d-block d-md-flex align-items-center w-100">
        <div class="portlet-body w-100">
            <div class="table-scrollable table-scrollable-borderless">
                <table class="table table-bordered">
                    
                    <tbody>
                        {% for object in req %}
                           
                                <tr>
                                    <td>
                                        <div class="row py-3">
                                            <div class="col-10">
                                                
                                                <h3 style="color:lightslategray">{{ object.message|capfirst }}</h3><br>
                                                <table class="table table-light table-borderless">

                                                    <tr>
                                                        <td width="30%">
                                                            <p style="color:black">Date & Time</p>
                                                        </td>
                                                        <td>
                                                            <p style="color:black">{{ object.date|capfirst }},{{ object.time|capfirst }}</p>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td width="30%">
                                                            <p style="color:black">Requester Name</p>
                                                        </td>
                                                        <td>
                                                            <p style="color:black">{{ object.name|capfirst }}</p>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td width="30%">
                                                            <p style="color:black">Requester Address</p>
                                                        </td>
                                                        <td>
                                                            <p style="color:black">{{ object.address|capfirst }}</p>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td width="30%">
                                                            <p style="color:black">City</p>
                                                        </td>
                                                        <td>
                                                            <p style="color:black"> {{ object.city|capfirst }}</p>
                                                        </td>
                                                    </tr>
                                                </table>
                                                <p style="color:grey">Requested on {{ object.timestamp|capfirst|truncatechars:11 }}</p>
                                            </div>
                                        </div>
                                        
                                        <form action = "" method = "post">
                                            {% csrf_token %}
                                            <div class="text-dark">
                                            <button type="submit" class="btn btn-primary right">Accept Offer</button>
                                                </div>
                                        </form>
                                    </td> 
    
                                </tr>
                                {% endfor %}
                           
    
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>
    <br><br>
    
    
    {% comment %} 
    l - Length changing
    f - Filtering input
    t - The Table!
    i - Information
    p - Pagination
    r - pRocessing 
    {% endcomment %}
    
    <script type="text/javascript">
    $(document).ready(function() {
    $('.dataTable').DataTable({
    "searching": false,
    "sDom": "<'top'<'row'<'col-6'i><'col-6'<'pull-right'f>>>>rt" +
            "<'bottom'<'row'<'col-6'l><'col-6'<'pull-right'p>>><'#refresh'>><'clear'>",
    "language": {
        "zeroRecords": "<p class='mx-auto'>No results found</p></div>"
    },
    fnDrawCallback: function() {
        $(".dataTable thead").remove();
    },
    });
    });
    </script>
    {% endblock content %}